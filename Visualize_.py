
import Consts
import numpy as np
import matplotlib.pyplot as plt


from cycler import cycler
from matplotlib.collections import EventCollection
from matplotlib.pyplot import figure
from ReduceData import ReduceData


class Visualize_:

        def __init__(self,
                        color_arr: list = ['c', 'm', 'y', 'k'],
                        linestyle_arr: list = ['-', '--', ':', '-.']):

                self.color_arr: list = color_arr
                self.linestyle_arr: list = linestyle_arr
                # self.fig: plt.figure = plt.figure()
                self.default_cycler: cycler = (cycler(color=self.color_arr) +
                                        cycler(linestyle=self.linestyle_arr))

                # self.fig.set_figwidth(20)
                # self.fig.set_figheight(15)

                self.plots : dict = {
                        'BERTScore' : dict(),
                        'BERTScore_f' : dict(),
                        'BLEURT' : dict(),
                        'BLEURT_f': dict(),
                        'ME' : dict() 
                }


        @staticmethod
        def get_data(key: str, data : ReduceData, descr: str):
                # x value as deterioration step, y value as different metrices
                plot_data = [(x, np.asarray(list(y.values())))
                        for x, y in data.combined_data[key][descr]]
                # unzipping values
                plot_data: list = list(zip(*plot_data))
                print(plot_data)
                x_data, y_data = np.asarray(plot_data[0]), np.asarray(plot_data[1])
                return x_data, y_data


        @staticmethod
        def create_plot(data : dict, task : str, metric : str, fig : plt.figure, title : str, subplot_info : tuple = (2, 3)):

                description : dict = data['description']
                x_data : np.ndarray = data['x']
                y_data_mean : np.ndarray = data['y_mean']
                y_data_min : np.ndarray = data['y_min']
                y_data_max : np.ndarray = data['y_max']

                # set up graph
                submetrics: int = np.shape(y_data_mean)[1]
                ax: plt.axes._subplots.AxesSubplot = fig.add_subplot(subplot_info[0], subplot_info[1], len(fig.axes) + 1)
                ax.set_xlim((-0.1, 1))
                ax.set_ylim((-0.1, 1.1))
                
                for j in range(submetrics):
                        # display mean
                        ax.scatter(x_data, y_data_mean[:, j])
                        ax.plot(x_data, y_data_mean[:, j])

                        # for x in x_data:
                        #         print(y_data_min[:, j][i])
                        #         ax.axvline(x=x,ymin=y_data_min[:, j][i],ymax=y_data_max[:, j][i],c=style_properties[j]['color'],linewidth=1,zorder=0, alpha=0.5)

                        # ax.boxplot(y_data_scatter)
                        # ax.set_xticklabels(x_data)
                ax.set_title(title)
                ax.legend(tuple(description['LEGEND']))




        def plot(self, data : dict, fun : callable):
                fun(data, self.create_plot)
                plt.show()



        def show_metrics_on_tasks(self, data : dict, plot : callable):

                for task in data.keys():
                        fig: plt.figure = plt.figure()
                        for score in data[task].keys():
                                plot(data[task][score], task, score, fig, data[task][score]['description']['title'])
                        plt.show()

        def show_tasks_by_metric(self, data : dict, plot : callable):
                
                scores : list =list(data[list(data.keys())[0]].keys())
                for s in scores:
                        fig: plt.figure = plt.figure()
                        fig.set
                        for task in data.keys():
                                for score in data[task].keys():
                                        if score == s:
                                                print(task)
                                                plot(data[task][score], task, score, fig, task,subplot_info=(3,3))
                        plt.show()



        def __plot__(self, data : ReduceData):

                self.data : ReduceData = data
                self.fig.suptitle(
                        "Metric performance over increasingly damaged data: " + self.data.perturb_type)

                style_properties: list = list(self.default_cycler)


                for i, key in enumerate(self.data.combined_data.keys()):

                        description: dict = Consts.CONSTS[key]

                        x_data, y_data_mean = self.get_data(key, data, 'mean')
                        _, y_data_scatter = self.get_data(key, data, 'data')
                        _, y_data_min = self.get_data(key, data, 'min')
                        _, y_data_max = self.get_data(key, data, 'max')

                        # set up graph
                        submetrics: int = np.shape(y_data_mean)[1]
                        ax: plt.axes._subplots.AxesSubplot = self.fig.add_subplot(
                                2, 3, i + 1)
                        ax.set_xlim((-0.1, 1))
                        ax.set_ylim((-0.1, 1.1))
                        
                        for j in range(submetrics):
                                # display mean
                                ax.scatter(x_data, y_data_mean[:, j])
                                ax.plot(x_data, y_data_mean[:, j])

                                # for x in x_data:
                                #         print(y_data_min[:, j][i])
                                #         ax.axvline(x=x,ymin=y_data_min[:, j][i],ymax=y_data_max[:, j][i],c=style_properties[j]['color'],linewidth=1,zorder=0, alpha=0.5)

                                # ax.boxplot(y_data_scatter)
                                # ax.set_xticklabels(x_data)
                        ax.set_title(description['TITLE'])
                        ax.legend(tuple(description['LEGEND']))
                        print(description['TITLE'])

                plt.show()

        

        

        def close_figures(self):
                for key_m in self.plots.keys():
                        for key_task in self.plots[key_m].keys():
                                fig, _ = self.plots[key_m][key_task]
                                plt.close(fig)

example_data: tuple = ('negated',
                       [(0.0,
                         [({'P': [1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000],
                             'R': [1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000],
                            'F1': [1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000]},
                           {'BLEURT': [0.8746666312217712,
                                       0.8567565083503723,
                                       0.8358623385429382,
                                       0.8770350813865662,
                                       0.8746666312217712,
                                       0.8567565083503723,
                                       0.8358623385429382,
                                       0.8164492249488831,
                                       0.8477662801742554,
                                       0.8499630689620972,
                                       0.8349398374557495,
                                       0.8753176927566528,
                                       0.9213920831680298,
                                       0.8696906566619873,
                                       0.890211820602417,
                                       0.9048885107040405,
                                       0.9089322090148926,
                                       0.9258546233177185,
                                       0.9110219478607178,
                                       0.918874979019165,
                                       0.894729733467102,
                                       0.9027830362319946,
                                       0.8643616437911987,
                                       0.9030368328094482,
                                       0.8773288726806641,
                                       0.9038712382316589,
                                       0.8989827632904053,
                                       0.8804084062576294,
                                       0.9071328639984131,
                                       0.8742455244064331,
                                       0.8641209602355957,
                                       0.8984935283660889,
                                       0.8799912929534912,
                                       0.8552739024162292,
                                       0.8952562808990479,
                                       0.8746556639671326,
                                       0.8349267244338989,
                                       0.8805034160614014,
                                       0.8365312814712524,
                                       0.8926960229873657,
                                       0.90276700258255,
                                       0.9099022150039673,
                                       0.9088211059570312,
                                       0.8923321962356567,
                                       0.925932765007019,
                                       0.8912681937217712,
                                       0.9032831192016602,
                                       0.9217652082443237,
                                       0.8984544277191162,
                                       0.9032204151153564,
                                       0.9143776297569275,
                                       0.9238423109054565,
                                       0.8967781066894531,
                                       0.9060832858085632]},
                           {'Petersen': 0.9444444444444444,
                               'Schnabel': 0.9444444444444444,
                               'CAPTURE': 0.9722222222222222},
                           []),
                          ({'P': [1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000],
                            'R': [1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                         1.0000, 1.0000],
                            'F1': [1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000,
                                          1.0000, 1.0000]},
                             {'BLEURT': [0.8536190986633301,
                                         0.8436111211776733,
                                         0.8478909730911255,
                                         0.8916933536529541,
                                         0.8816983103752136,
                                         0.8942787051200867,
                                         0.8914591073989868,
                                         0.8831551671028137,
                                         0.9053953886032104,
                                         0.8513093590736389,
                                         0.8745821118354797,
                                         0.8327516317367554,
                                         0.8609695434570312,
                                         0.8919820785522461,
                                         0.8798155784606934,
                                         0.8807522058486938,
                                         0.9147312641143799,
                                         0.8641475439071655,
                                         0.9131631851196289,
                                         0.9105868339538574,
                                         0.8944588899612427,
                                         0.8706515431404114,
                                         0.8584389686584473,
                                         0.8695902228355408,
                                         0.8758814334869385,
                                         0.8761890530586243,
                                         0.8525758385658264,
                                         0.885951578617096,
                                         0.8207454681396484,
                                         0.867841362953186,
                                         0.8603991866111755,
                                         0.8782799243927002,
                                         0.8905402421951294,
                                         0.9099042415618896,
                                         0.9076488614082336,
                                         0.8601934313774109,
                                         0.8509549498558044,
                                         0.86490398645401,
                                         0.8800170421600342,
                                         0.8590762615203857,
                                         0.8877992630004883,
                                         0.8875830173492432,
                                         0.8336553573608398,
                                         0.922545850276947,
                                         0.9178034067153931,
                                         0.9195219278335571,
                                         0.8741661906242371]},
                             {'Petersen': 1.0, 'Schnabel': 1.0,
                                 'CAPTURE': 0.9787234042553191},
                             [])]),
                           (0.5,
                            [({'P': [0.9929, 0.9939, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9948, 1.0000,
                                            1.0000, 0.9883, 1.0000, 1.0000, 0.9842, 1.0000, 0.9843, 0.9632, 0.9835,
                                            1.0000, 1.0000, 1.0000, 0.9867, 1.0000, 0.9895, 0.9924, 1.0000, 0.9820,
                                            1.0000, 1.0000, 0.9857, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9886,
                                            0.9883, 1.0000, 1.0000, 0.9841, 0.9539, 1.0000, 1.0000, 1.0000, 0.9540,
                                            0.9800, 1.0000, 1.0000, 1.0000, 0.9708, 1.0000, 1.0000, 1.0000, 1.0000],
                               'R': [0.9864, 0.9901, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9921, 1.0000,
                                            1.0000, 0.9808, 1.0000, 1.0000, 0.9754, 1.0000, 0.9687, 0.9278, 0.9621,
                                            1.0000, 1.0000, 1.0000, 0.9685, 1.0000, 0.9723, 0.9724, 1.0000, 0.9486,
                                            1.0000, 1.0000, 0.9701, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9806,
                                            0.9828, 1.0000, 1.0000, 0.9754, 0.9364, 1.0000, 1.0000, 1.0000, 0.9351,
                                            0.9635, 1.0000, 1.0000, 1.0000, 0.9539, 1.0000, 1.0000, 1.0000, 1.0000],
                                'F1': [0.9896, 0.9920, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9934, 1.0000,
                                              1.0000, 0.9845, 1.0000, 1.0000, 0.9798, 1.0000, 0.9764, 0.9451, 0.9727,
                                              1.0000, 1.0000, 1.0000, 0.9775, 1.0000, 0.9808, 0.9823, 1.0000, 0.9650,
                                              1.0000, 1.0000, 0.9778, 1.0000, 1.0000, 1.0000, 1.0000, 1.0000, 0.9845,
                                              0.9856, 1.0000, 1.0000, 0.9797, 0.9451, 1.0000, 1.0000, 1.0000, 0.9444,
                                              0.9717, 1.0000, 1.0000, 1.0000, 0.9623, 1.0000, 1.0000, 1.0000, 1.0000]},
                              {'BLEURT': [0.6661275625228882,
                                          0.5279038548469543,
                                          0.8358623385429382,
                                          0.8770350813865662,
                                          0.8746666312217712,
                                          0.8567565083503723,
                                          0.8358623385429382,
                                          0.45185166597366333,
                                          0.8477662801742554,
                                          0.8499630689620972,
                                          0.804135799407959,
                                          0.8753176927566528,
                                          0.9213920831680298,
                                          0.4991982579231262,
                                          0.890211820602417,
                                          0.4222859740257263,
                                          0.03581862151622772,
                                          -0.3059186339378357,
                                          0.9110219478607178,
                                          0.918874979019165,
                                          0.894729733467102,
                                          0.7315202355384827,
                                          0.8643616437911987,
                                          0.7086095213890076,
                                          0.5201342105865479,
                                          0.9038712382316589,
                                          -0.017079100012779236,
                                          0.8804084062576294,
                                          0.9071328639984131,
                                          0.673457682132721,
                                          0.8641209602355957,
                                          0.8984935283660889,
                                          0.8799912929534912,
                                          0.8552739024162292,
                                          0.8952562808990479,
                                          0.3228984475135803,
                                          0.7990463972091675,
                                          0.8805034160614014,
                                          0.8365312814712524,
                                          0.318436861038208,
                                          -0.10732419788837433,
                                          0.9099022150039673,
                                          0.9088211059570312,
                                          0.8923321962356567,
                                          -0.5866451859474182,
                                          -0.4196583032608032,
                                          0.9032831192016602,
                                          0.9217652082443237,
                                          0.8984544277191162,
                                          -0.31937646865844727,
                                          0.9143776297569275,
                                          0.9238423109054565,
                                          0.8967781066894531,
                                          0.9060832858085632]},
                              {'Petersen': 0.9659498207885305,
                                'Schnabel': 0.9911197747455057,
                               'CAPTURE': 0.9907407407407407},
                                [49,
                                 17,
                                 35,
                                 23,
                                 16,
                                 45,
                                 21,
                                 10,
                                 0,
                                 1,
                                 7,
                                 36,
                                 40,
                                 44,
                                 29,
                                 39,
                                 26,
                                 13,
                                 24,
                                 15]),
                             ({'P': [0.9938, 1.0000, 0.9916, 1.0000, 1.0000, 0.9929, 0.9874, 1.0000, 1.0000,
                                            1.0000, 0.9895, 0.9939, 1.0000, 0.9871, 1.0000, 1.0000, 1.0000, 1.0000,
                                            0.9811, 1.0000, 1.0000, 1.0000, 1.0000, 0.9921, 1.0000, 1.0000, 0.9908,
                                            0.9757, 1.0000, 1.0000, 0.9727, 0.9923, 0.9859, 1.0000, 1.0000, 1.0000,
                                            1.0000, 0.9902, 0.9863, 1.0000, 1.0000, 1.0000, 1.0000, 0.9886, 0.9769,
                                            1.0000, 0.9950],
                               'R': [0.9879, 1.0000, 0.9856, 1.0000, 1.0000, 0.9872, 0.9718, 1.0000, 1.0000,
                                            1.0000, 0.9801, 0.9878, 1.0000, 0.9705, 1.0000, 1.0000, 1.0000, 1.0000,
                                            0.9666, 1.0000, 1.0000, 1.0000, 1.0000, 0.9864, 1.0000, 1.0000, 0.9849,
                                            0.9485, 1.0000, 1.0000, 0.9585, 0.9827, 0.9801, 1.0000, 1.0000, 1.0000,
                                            1.0000, 0.9829, 0.9773, 1.0000, 1.0000, 1.0000, 1.0000, 0.9783, 0.9646,
                                            1.0000, 0.9834],
                               'F1': [0.9909, 1.0000, 0.9885, 1.0000, 1.0000, 0.9901, 0.9795, 1.0000, 1.0000,
                                             1.0000, 0.9848, 0.9908, 1.0000, 0.9787, 1.0000, 1.0000, 1.0000, 1.0000,
                                             0.9738, 1.0000, 1.0000, 1.0000, 1.0000, 0.9892, 1.0000, 1.0000, 0.9878,
                                             0.9619, 1.0000, 1.0000, 0.9655, 0.9875, 0.9830, 1.0000, 1.0000, 1.0000,
                                             1.0000, 0.9866, 0.9818, 1.0000, 1.0000, 1.0000, 1.0000, 0.9834, 0.9707,
                                             1.0000, 0.9892]},
                              {'BLEURT': [0.602487325668335,
                                          0.8436111211776733,
                                          0.5355947613716125,
                                          0.8916933536529541,
                                          0.8816983103752136,
                                          0.8827922344207764,
                                          0.6229477524757385,
                                          0.8831551671028137,
                                          0.9053953886032104,
                                          0.8513093590736389,
                                          0.40815430879592896,
                                          0.3766694962978363,
                                          0.8609695434570312,
                                          0.23261377215385437,
                                          0.8798155784606934,
                                          0.8807522058486938,
                                          0.9147312641143799,
                                          0.8641475439071655,
                                          -0.467668354511261,
                                          0.9105868339538574,
                                          0.8944588899612427,
                                          0.8706515431404114,
                                          0.8584389686584473,
                                          0.4272925853729248,
                                          0.8758814334869385,
                                          0.8761890530586243,
                                          0.4437541961669922,
                                          0.128040611743927,
                                          0.8207454681396484,
                                          0.867841362953186,
                                          0.4107259511947632,
                                          0.3238123059272766,
                                          0.17103780806064606,
                                          0.9099042415618896,
                                          0.9076488614082336,
                                          0.8601934313774109,
                                          0.8509549498558044,
                                          0.32454609870910645,
                                          0.3242931365966797,
                                          0.8590762615203857,
                                          0.8877992630004883,
                                          0.8875830173492432,
                                          0.8336553573608398,
                                          0.7208766341209412,
                                          0.750129759311676,
                                          0.9195219278335571,
                                          0.5840184092521667]},
                                {'Petersen': 0.9974968710888611,
                                 'Schnabel': 0.9683544303797468,
                                 'CAPTURE': 0.9787234042553191},
                                [18,
                                 30,
                                 38,
                                 23,
                                 43,
                                 32,
                                 26,
                                 46,
                                 0,
                                 11,
                                 2,
                                 37,
                                 5,
                                 44,
                                 6,
                                 31,
                                 27,
                                 13,
                                 10])]),
                           (1.0,
                            [({'P': [0.9929, 0.9939, 1.0000, 1.0000, 0.9929, 0.9939, 1.0000, 0.9948, 0.9893,
                                            0.9913, 0.9883, 0.9839, 0.9835, 0.9842, 0.9901, 0.9843, 0.9632, 0.9835,
                                            1.0000, 0.9808, 0.9903, 0.9867, 0.9919, 0.9895, 0.9924, 0.9883, 0.9820,
                                            0.9781, 1.0000, 0.9857, 0.9897, 1.0000, 0.9831, 0.9908, 0.9771, 0.9886,
                                            0.9883, 1.0000, 1.0000, 0.9841, 0.9539, 1.0000, 1.0000, 0.9752, 0.9540,
                                            0.9800, 1.0000, 0.9645, 0.9676, 0.9708, 0.9474, 0.9710, 1.0000, 1.0000],
                               'R': [0.9864, 0.9901, 1.0000, 1.0000, 0.9864, 0.9901, 1.0000, 0.9921, 0.9811,
                                            0.9872, 0.9808, 0.9735, 0.9718, 0.9754, 0.9847, 0.9687, 0.9278, 0.9621,
                                            1.0000, 0.9584, 0.9835, 0.9685, 0.9844, 0.9723, 0.9724, 0.9776, 0.9486,
                                            0.9765, 1.0000, 0.9701, 0.9843, 1.0000, 0.9707, 0.9795, 0.9689, 0.9806,
                                            0.9828, 1.0000, 1.0000, 0.9754, 0.9364, 1.0000, 1.0000, 0.9590, 0.9351,
                                            0.9635, 1.0000, 0.9346, 0.9468, 0.9539, 0.9344, 0.9593, 1.0000, 1.0000],
                                'F1': [0.9896, 0.9920, 1.0000, 1.0000, 0.9896, 0.9920, 1.0000, 0.9934, 0.9852,
                                              0.9893, 0.9845, 0.9787, 0.9776, 0.9798, 0.9874, 0.9764, 0.9451, 0.9727,
                                              1.0000, 0.9695, 0.9869, 0.9775, 0.9881, 0.9808, 0.9823, 0.9829, 0.9650,
                                              0.9773, 1.0000, 0.9778, 0.9870, 1.0000, 0.9769, 0.9851, 0.9730, 0.9845,
                                              0.9856, 1.0000, 1.0000, 0.9797, 0.9451, 1.0000, 1.0000, 0.9671, 0.9444,
                                              0.9717, 1.0000, 0.9493, 0.9571, 0.9623, 0.9409, 0.9651, 1.0000, 1.0000]},
                              {'BLEURT': [0.6661275625228882,
                                          0.5279038548469543,
                                          0.8358623385429382,
                                          0.8770350813865662,
                                          0.6661275625228882,
                                          0.5279038548469543,
                                          0.8358623385429382,
                                          0.45185166597366333,
                                          0.8297901749610901,
                                          0.7939496636390686,
                                          0.804135799407959,
                                          0.4366028308868408,
                                          -0.4732658863067627,
                                          0.4991982579231262,
                                          0.494489848613739,
                                          0.4222859740257263,
                                          0.03581862151622772,
                                          -0.3059186339378357,
                                          0.9110219478607178,
                                          0.07451528310775757,
                                          0.2907498776912689,
                                          0.7315202355384827,
                                          0.3648746609687805,
                                          0.7086095213890076,
                                          0.5201342105865479,
                                          0.46239227056503296,
                                          -0.017079100012779236,
                                          0.8544273376464844,
                                          0.9071328639984131,
                                          0.673457682132721,
                                          0.4696769118309021,
                                          0.8984935283660889,
                                          0.19787533581256866,
                                          0.5978482365608215,
                                          0.5902408957481384,
                                          0.3228984475135803,
                                          0.7990463972091675,
                                          0.8805034160614014,
                                          0.8365312814712524,
                                          0.318436861038208,
                                          -0.10732419788837433,
                                          0.9099022150039673,
                                          0.9088211059570312,
                                          0.2609896659851074,
                                          -0.5866451859474182,
                                          -0.4196583032608032,
                                          0.9032831192016602,
                                          -0.19824187457561493,
                                          -0.1663053184747696,
                                          -0.31937646865844727,
                                          -0.09747911989688873,
                                          -0.19483374059200287,
                                          0.8967781066894531,
                                          0.9060832858085632]},
                              {'Petersen': 0.9520697167755992,
                                'Schnabel': 0.9862869198312235,
                               'CAPTURE': 0.9722222222222222},
                                [45,
                                 11,
                                 1,
                                 7,
                                 9,
                                 27,
                                 19,
                                 14,
                                 35,
                                 12,
                                 13,
                                 20,
                                 29,
                                 43,
                                 36,
                                 44,
                                 16,
                                 39,
                                 40,
                                 5,
                                 51,
                                 8,
                                 25,
                                 17,
                                 26,
                                 10,
                                 32,
                                 22,
                                 0,
                                 24,
                                 30,
                                 34,
                                 23,
                                 50,
                                 48,
                                 49,
                                 47,
                                 4,
                                 21,
                                 33,
                                 15]),
                             ({'P': [0.9938, 0.9929, 0.9916, 0.9832, 1.0000, 0.9929, 0.9874, 0.9955, 1.0000,
                                            0.9934, 0.9895, 0.9939, 0.9910, 0.9871, 0.9925, 0.9869, 0.9828, 0.9837,
                                            0.9811, 0.9873, 0.9693, 1.0000, 0.9800, 0.9921, 1.0000, 0.9896, 0.9908,
                                            0.9757, 0.9920, 0.9859, 0.9727, 0.9923, 0.9859, 1.0000, 0.9845, 0.9926,
                                            0.9927, 0.9902, 0.9863, 0.9927, 0.9780, 0.9841, 0.9951, 0.9886, 0.9769,
                                            1.0000, 0.9950],
                               'R': [0.9879, 0.9881, 0.9856, 0.9566, 1.0000, 0.9872, 0.9718, 0.9854, 1.0000,
                                            0.9894, 0.9801, 0.9878, 0.9854, 0.9705, 0.9818, 0.9803, 0.9653, 0.9704,
                                            0.9666, 0.9650, 0.9574, 1.0000, 0.9722, 0.9864, 1.0000, 0.9779, 0.9849,
                                            0.9485, 0.9883, 0.9713, 0.9585, 0.9827, 0.9801, 1.0000, 0.9659, 0.9757,
                                            0.9784, 0.9829, 0.9773, 0.9859, 0.9477, 0.9729, 0.9890, 0.9783, 0.9646,
                                            1.0000, 0.9834],
                               'F1': [0.9909, 0.9905, 0.9885, 0.9697, 1.0000, 0.9901, 0.9795, 0.9904, 1.0000,
                                             0.9914, 0.9848, 0.9908, 0.9882, 0.9787, 0.9871, 0.9836, 0.9740, 0.9770,
                                             0.9738, 0.9760, 0.9633, 1.0000, 0.9761, 0.9892, 1.0000, 0.9837, 0.9878,
                                             0.9619, 0.9902, 0.9785, 0.9655, 0.9875, 0.9830, 1.0000, 0.9751, 0.9841,
                                             0.9855, 0.9866, 0.9818, 0.9893, 0.9626, 0.9785, 0.9920, 0.9834, 0.9707,
                                             1.0000, 0.9892]},
                              {'BLEURT': [0.602487325668335,
                                          0.4927681088447571,
                                          0.5355947613716125,
                                          0.305232435464859,
                                          0.8816983103752136,
                                          0.8827922344207764,
                                          0.6229477524757385,
                                          0.509768545627594,
                                          0.9053953886032104,
                                          0.457348108291626,
                                          0.40815430879592896,
                                          0.3766694962978363,
                                          0.5563815832138062,
                                          0.23261377215385437,
                                          0.5360326766967773,
                                          0.6514009237289429,
                                          -0.5975518226623535,
                                          0.11844943463802338,
                                          -0.467668354511261,
                                          0.7456942200660706,
                                          0.7816351652145386,
                                          0.8706515431404114,
                                          0.22791975736618042,
                                          0.4272925853729248,
                                          0.8758814334869385,
                                          0.3006107211112976,
                                          0.4437541961669922,
                                          0.128040611743927,
                                          0.4212207794189453,
                                          0.14835093915462494,
                                          0.4107259511947632,
                                          0.3238123059272766,
                                          0.17103780806064606,
                                          0.9099042415618896,
                                          0.2610328495502472,
                                          0.3985784947872162,
                                          0.3895779848098755,
                                          0.32454609870910645,
                                          0.3242931365966797,
                                          0.7680126428604126,
                                          0.16368819773197174,
                                          0.24982066452503204,
                                          0.808624267578125,
                                          0.7208766341209412,
                                          0.750129759311676,
                                          0.9195219278335571,
                                          0.5840184092521667]},
                                {'Petersen': 0.9861989649223692,
                                 'Schnabel': 0.9375,
                                 'CAPTURE': 0.9574468085106383},
                                [11,
                                 30,
                                 18,
                                 17,
                                 26,
                                 25,
                                 43,
                                 42,
                                 14,
                                 29,
                                 2,
                                 12,
                                 0,
                                 46,
                                 36,
                                 23,
                                 31,
                                 27,
                                 20,
                                 34,
                                 37,
                                 39,
                                 28,
                                 35,
                                 9,
                                 5,
                                 10,
                                 32,
                                 19,
                                 44,
                                 13,
                                 41,
                                 16,
                                 7,
                                 15,
                                 6,
                                 1,
                                 22,
                                 3,
                                 40,
                                 38])])])


if __name__ == "__main__":
        # import pickle
        file_list = [
                "negated_data.p",
                "pos_drop_adj_data.p",
                "pos_drop_det_data.p",
                "repetitions_data.p",
                "word_drop_data.p",
                "word_drop_every_sentence_data.p",
                "word_swap_data.p",
                "word_swap_every_sentence_data.p"]

        # test =ReduceData(example_data)
        task_list = [
                "negated",
                "pos_drop_adj",
                "pos_drop_det",
                "repetitions",
                "word_drop",
                "word_drop_every_sentence",
                "word_swap",
                "word_swap_every_sentence"]

        test = ReduceData()
        test.add_data(task_list, folder_path="./output_9/")
        test.vis_ready()

        testVis = Visualize_()
        # testVis.plot(test.plot_data, testVis.show_metrics_on_tasks)
        testVis.plot(test.plot_data, testVis.show_tasks_by_metric)